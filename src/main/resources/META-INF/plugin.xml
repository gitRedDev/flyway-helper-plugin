<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin require-restart="true">
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>com.helpers.flyway-helper</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>Flyway-Helper</name>

    <description>
        Flyway helper plugin to help interacting with migrations.
    </description>
    <vendor>red1</vendor>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <notificationGroup id="flyway.migration.notification" displayType="BALLOON"/>
    </extensions>

    <actions>
        <action
                id="flyway.migration.refresh"
                class="com.helpers.flywayhelper.actions.RefreshMigrationAction"
                text="Refresh Migrations"
                icon="AllIcons.Actions.Refresh"
                description="Refresh migrations">
        </action>
        <group
                id="flyway.migration.settings"
                text="Flyway Helper"
                description="Flyway helper"
                icon="CustomIcons.PluginIcon"
                popup="true">
            <action
                    id="flyway.migration.configure.syncBranch"
                    class="com.helpers.flywayhelper.actions.ConfigureSyncBranchAction"
                    text="Configure Sync Branch"
                    icon="AllIcons.Ide.ConfigFile"
                    description="Configure sync branch">
            </action>
            <reference ref="flyway.migration.refresh" />
            <action
                    id="flyway.migration.readmore"
                    class="com.helpers.flywayhelper.actions.ReadMoreAction"
                    text="Read More..."
                    icon="AllIcons.Actions.More"
                    description="Read more...">
            </action>
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </group>
        <action
                id="flyway.migration.create"
                class="com.helpers.flywayhelper.actions.CreateMigrationAction"
                text="New Migration"
                icon="CustomIcons.Dark.MigrationFileIcon"
                description="New migration">
            <add-to-group group-id="NewGroup" anchor="after" relative-to-action="NewFile"/>
        </action>
        <group
                id="flyway.migration.projectActions"
                text="Flyway Helper"
                description="Flyway helper"
                icon="CustomIcons.PluginIcon"
                popup="true">
            <reference ref="flyway.migration.refresh" />
            <add-to-group group-id="ProjectViewPopupMenu" anchor="before" relative-to-action="VersionControlsGroup"/>
        </group>
    </actions>

    <applicationListeners>
        <listener
                class="com.helpers.flywayhelper.listeners.OnOpenProjectListener"
                topic="com.intellij.openapi.project.ProjectManagerListener"/>
    </applicationListeners>

    <change-notes>
        <![CDATA[
            <p><b>Version: 1.0.0</b></p>
            <ul>
              <li>Get the next version for your migration file automatically</li>
              <li>Avoid having version conflicts among your migration files</li>
            </ul>
            <p><i>PS: You can even sync it with a remote branch to get always the latest version that you may need</i></p>
        ]]>
    </change-notes>

</idea-plugin>